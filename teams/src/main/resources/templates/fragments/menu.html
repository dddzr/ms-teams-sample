<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
    <div th:fragment="menu" class="menu-container">
        <div class="menu-list">
            <a href="/home" class="menu-item" id="menu-home">π  ν™</a>
            <a href="/home/profile" class="menu-item" id="menu-profile">π‘¤ ν”„λ΅ν•„</a>
            <a href="/home/teams" class="menu-item" id="menu-teams">π‘¥ Teams</a>
            <a href="/home/chats" class="menu-item" id="menu-chats">π’¬ μ±„ν…</a>
            <a href="/home/calendar" class="menu-item" id="menu-calendar">π“… μΌμ •</a>
            <a href="/home/meetings" class="menu-item" id="menu-meetings">π¥ λ―Έν…</a>
            <a href="/home/admin" class="menu-item" id="menu-admin" th:if="${isAdmin}" style="display: none;">β™οΈ κ΄€λ¦¬μ</a>
        </div>
    </div>
    
    <script th:fragment="menu-script">
        // ν„μ¬ νμ΄μ§€μ— λ”°λΌ λ©”λ‰΄ ν™μ„±ν™”
        const currentPath = window.location.pathname;
        const menuItems = document.querySelectorAll('.menu-item');
        
        menuItems.forEach(item => {
            item.classList.remove('active');
            if (currentPath === item.getAttribute('href') || 
                (currentPath === '/home' && item.id === 'menu-home') ||
                (currentPath === '/home/profile' && item.id === 'menu-profile') ||
                (currentPath.startsWith('/home/teams') && item.id === 'menu-teams') ||
                (currentPath.startsWith('/home/chats') && item.id === 'menu-chats') ||
                (currentPath.startsWith('/home/calendar') && item.id === 'menu-calendar') ||
                (currentPath.startsWith('/home/meetings') && item.id === 'menu-meetings') ||
                (currentPath.startsWith('/home/admin') && item.id === 'menu-admin')) {
                item.classList.add('active');
            }
        });
        
        // κ΄€λ¦¬μ λ©”λ‰΄ ν‘μ‹ μ—¬λ¶€ ν™•μΈ
        fetch('/api/admin/check')
            .then(response => response.json())
            .then(data => {
                if (data.isAdmin) {
                    const adminMenu = document.getElementById('menu-admin');
                    if (adminMenu) {
                        adminMenu.style.display = 'block';
                    }
                }
            })
            .catch(error => {
                console.log('κ΄€λ¦¬μ κ¶ν• ν™•μΈ μ‹¤ν¨:', error);
            });
    </script>
</body>
</html>


